<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free online tool to compare and analyze differences between two text documents. Perfect for writers, editors, and content creators.">
    <meta name="keywords" content="text comparison, diff tool, document comparison, text analysis, SEO tool">
    <meta name="author" content="Text Compare Tool">
    <title>Text Comparison Tool | Compare and Analyze Text Differences</title>
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #166088;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #28a745;
            --danger: #dc3545;
            --info: #17a2b8;
            --border-radius: 5px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
        }

        header {
            background-color: var(--primary);
            color: white;
            padding: 2rem 1rem;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .intro {
            text-align: center;
            margin-bottom: 2rem;
            color: #495057;
        }

        .comparison-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .text-column {
            flex: 1 1 45%;
            min-width: 300px;
            display: flex;
            flex-direction: column;
        }

        .text-column-header {
            background-color: var(--secondary);
            color: white;
            padding: 0.75rem;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .text-area {
            flex-grow: 1;
            padding: 1rem;
            border: 1px solid #ced4da;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            resize: vertical;
            min-height: 300px;
            font-size: 1rem;
            line-height: 1.5;
            background-color: white;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            background-color: var(--primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        button:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
        }

        button.secondary {
            background-color: #6c757d;
        }

        button.secondary:hover {
            background-color: #5a6268;
        }

        .result-container {
            margin-top: 2rem;
            padding: 1rem;
            border-radius: var(--border-radius);
            background-color: white;
            box-shadow: var(--shadow);
        }

        .difference-results {
            min-height: 200px;
            padding: 1rem;
            white-space: pre-wrap;
            font-family: monospace;
            line-height: 1.5;
            overflow-x: auto;
        }

        .added {
            background-color: rgba(40, 167, 69, 0.2);
            text-decoration: underline green;
        }

        .removed {
            background-color: rgba(220, 53, 69, 0.2);
            text-decoration: line-through red;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
            background-color: var(--light);
            padding: 1rem;
            border-radius: var(--border-radius);
        }

        .stat-box {
            flex: 1;
            min-width: 150px;
            text-align: center;
            padding: 1rem;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .stat-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        footer {
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 3rem;
            background-color: var(--dark);
            color: white;
        }

        @media (max-width: 768px) {
            .text-column {
                flex: 1 1 100%;
            }
        }

        /* Accessibility focus styles */
        button:focus, textarea:focus {
            outline: 2px solid var(--info);
            outline-offset: 2px;
        }

        /* Skip link for screen readers */
        .skip-link {
            position: absolute;
            left: -9999px;
            top: 0;
            background: var(--primary);
            color: white;
            padding: 1rem;
            z-index: 100;
        }

        .skip-link:focus {
            left: 0;
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <header role="banner">
        <div class="container">
            <h1>Text Comparison Tool</h1>
            <p>Analyze differences between two text documents</p>
        </div>
    </header>

    <main id="main-content" class="container" role="main">
        <div class="intro">
            <p>Compare two versions of a document to see exactly what changed between them. Perfect for writers, editors, content creators, and developers tracking changes.</p>
        </div>

        <div class="comparison-container">
            <div class="text-column">
                <div class="text-column-header">
                    <h2>Original Text</h2>
                    <button class="secondary" id="clear-original">Clear</button>
                </div>
                <textarea id="original-text" class="text-area" placeholder="Paste your original text here..." aria-label="Original text input"></textarea>
            </div>

            <div class="text-column">
                <div class="text-column-header">
                    <h2>Modified Text</h2>
                    <button class="secondary" id="clear-modified">Clear</button>
                </div>
                <textarea id="modified-text" class="text-area" placeholder="Paste your modified text here..." aria-label="Modified text input"></textarea>
            </div>
        </div>

        <div class="controls">
            <button id="compare-btn">Compare Texts</button>
            <button id="swap-btn">Swap Texts</button>
            <button id="sample-btn">Load Sample</button>
            <button id="download-btn" class="secondary">Download Results</button>
        </div>

        <div class="result-container">
            <h2>Comparison Results</h2>
            <div id="difference-results" class="difference-results">
                <p>Results will appear here after comparing the texts.</p>
            </div>

            <div class="stats">
                <div class="stat-box">
                    <div class="stat-title">Characters Added</div>
                    <div id="added-count" class="stat-value">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-title">Characters Removed</div>
                    <div id="removed-count" class="stat-value">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-title">Total Differences</div>
                    <div id="total-differences" class="stat-value">0</div>
                </div>
            </div>
        </div>
    </main>

    <footer role="contentinfo">
        <div class="container">
            <p>Â© <span id="current-year"></span> Text Comparison Tool. All rights reserved.</p>
            <p>Free online tool for comparing texts and analyzing differences.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('current-year').textContent = new Date().getFullYear();

            // DOM elements
            const originalTextArea = document.getElementById('original-text');
            const modifiedTextArea = document.getElementById('modified-text');
            const compareBtn = document.getElementById('compare-btn');
            const swapBtn = document.getElementById('swap-btn');
            const sampleBtn = document.getElementById('sample-btn');
            const downloadBtn = document.getElementById('download-btn');
            const clearOriginalBtn = document.getElementById('clear-original');
            const clearModifiedBtn = document.getElementById('clear-modified');
            const differenceResults = document.getElementById('difference-results');
            const addedCount = document.getElementById('added-count');
            const removedCount = document.getElementById('removed-count');
            const totalDifferences = document.getElementById('total-differences');

            // Event listeners
            compareBtn.addEventListener('click', compareTexts);
            swapBtn.addEventListener('click', swapTexts);
            sampleBtn.addEventListener('click', loadSampleText);
            downloadBtn.addEventListener('click', downloadResults);
            clearOriginalBtn.addEventListener('click', () => originalTextArea.value = '');
            clearModifiedBtn.addEventListener('click', () => modifiedTextArea.value = '');

            // Sample text for demo
            function loadSampleText() {
                originalTextArea.value = `The quick brown fox jumps over the lazy dog.\nThis is a sample sentence for text comparison.\nThe quick brown fox is a beloved character.\nLorem ipsum dolor sit amet, consectetur adipiscing elit.`;

                modifiedTextArea.value = `The quick brown wolf jumps over the lazy dog.\nThis is a sample text for comparison purposes.\nThe quick brown fox is an iconic character.\nLorem ipsum dolor sit amet, consectetur adipisicing elit.`;
            }

            // Swap text between text areas
            function swapTexts() {
                const temp = originalTextArea.value;
                originalTextArea.value = modifiedTextArea.value;
                modifiedTextArea.value = temp;
            }

            // Compare texts and highlight differences
            function compareTexts() {
                const originalText = originalTextArea.value;
                const modifiedText = modifiedTextArea.value;
                
                if (!originalText && !modifiedText) {
                    differenceResults.innerHTML = '<p>Please enter text in both boxes to compare.</p>';
                    resetStats();
                    return;
                }

                const diffResult = diffText(originalText, modifiedText);
                differenceResults.innerHTML = diffResult.html;
                
                // Update statistics
                addedCount.textContent = diffResult.stats.added;
                removedCount.textContent = diffResult.stats.removed;
                totalDifferences.textContent = diffResult.stats.changes;
            }

            // Reset statistics display
            function resetStats() {
                addedCount.textContent = '0';
                removedCount.textContent = '0';
                totalDifferences.textContent = '0';
            }

            // Download results as a text file
            function downloadResults() {
                const content = `=== Text Comparison Results ===\n\n` + 
                               `Original Text:\n${originalTextArea.value}\n\n` +
                               `Modified Text:\n${modifiedTextArea.value}\n\n` +
                               `Comparison:\n${differenceResults.textContent}\n\n` +
                               `Statistics:\nAdded: ${addedCount.textContent} chars | ` +
                               `Removed: ${removedCount.textContent} chars | ` +
                               `Total Changes: ${totalDifferences.textContent}`;

                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'text-comparison-results.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }

            // Text difference algorithm
            function diffText(oldText, newText) {
                const oldLines = oldText.split('\n');
                const newLines = newText.split('\n');
                let added = 0;
                let removed = 0;
                let changes = 0;
                
                let maxLength = Math.max(oldLines.length, newLines.length);
                let html = '';
                
                for (let i = 0; i < maxLength; i++) {
                    const oldLine = oldLines[i] || '';
                    const newLine = newLines[i] || '';
                    
                    if (oldLine === newLine) {
                        html += escapeHtml(oldLine) + '\n';
                        continue;
                    }
                    
                    changes++;
                    
                    const oldWords = oldLine.split(/(\s+|\b)/).filter(word => word !== '');
                    const newWords = newLine.split(/(\s+|\b)/).filter(word => word !== '');
                    
                    const diff = diffWords(oldWords, newWords);
                    
                    let lineHtml = '';
                    for (const part of diff) {
                        if (part.added) {
                            lineHtml += `<span class="added">${escapeHtml(part.value)}</span>`;
                            added += part.value.length;
                        } else if (part.removed) {
                            lineHtml += `<span class="removed">${escapeHtml(part.value)}</span>`;
                            removed += part.value.length;
                        } else {
                            lineHtml += escapeHtml(part.value);
                        }
                    }
                    
                    html += lineHtml + '\n';
                }
                
                return {
                    html: html,
                    stats: {
                        added: added,
                        removed: removed,
                        changes: changes
                    }
                };
            }

            // Word-level diff algorithm
            function diffWords(oldWords, newWords) {
                const diff = [];
                let oldIndex = 0, newIndex = 0;
                
                // First pass: find unchanged prefixes and suffixes
                while (oldIndex < oldWords.length && newIndex < newWords.length && 
                       oldWords[oldIndex] === newWords[newIndex]) {
                    diff.push({ value: oldWords[oldIndex], added: false, removed: false });
                    oldIndex++;
                    newIndex++;
                }
                
                let commonSuffixLength = 0;
                while (oldIndex + commonSuffixLength < oldWords.length && 
                       newIndex + commonSuffixLength < newWords.length && 
                       oldWords[oldWords.length - 1 - commonSuffixLength] === 
                       newWords[newWords.length - 1 - commonSuffixLength]) {
                    commonSuffixLength++;
                }
                
                // Handle middle section with changes
                const oldMiddle = oldWords.slice(oldIndex, oldWords.length - commonSuffixLength);
                const newMiddle = newWords.slice(newIndex, newWords.length - commonSuffixLength);
                
                // Simple change detection - in a real app you might want a more sophisticated algorithm
                if (oldMiddle.length > 0) {
                    diff.push({ value: oldMiddle.join(''), removed: true });
                }
                if (newMiddle.length > 0) {
                    diff.push({ value: newMiddle.join(''), added: true });
                }
                
                // Add common suffix
                for (let i = 0; i < commonSuffixLength; i++) {
                    const idx = oldWords.length - commonSuffixLength + i;
                    diff.push({ value: oldWords[idx], added: false, removed: false });
                }
                
                return diff;
            }

            // Helper to escape HTML
            function escapeHtml(html) {
                const div = document.createElement('div');
                div.textContent = html;
                return div.innerHTML;
            }
        });
    </script>
</body>
</html>